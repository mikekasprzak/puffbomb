// - ------------------------------------------------------------------------------------------ - //
#include <Global.h>
// - ------------------------------------------------------------------------------------------ - //
#include "ClockHud.h"
// - ------------------------------------------------------------------------------------------ - //
#include "ClassicGameEngine.h"
// - ------------------------------------------------------------------------------------------ - //


// - ------------------------------------------------------------------------------------------ - //
cClockHud::cClockHud( ) :
	Engine( dynamic_cast<cClassicGameEngine*>(Engine2D::cEngine2D::Current) ),
	Hud( "2D/Hud/Classic/ClassicHud.form" ),
	FrameClock( 0 )
{
	
}
// - ------------------------------------------------------------------------------------------ - //
cClockHud::~cClockHud() {
	
}
// - ------------------------------------------------------------------------------------------ - //

// - ------------------------------------------------------------------------------------------ - //
void cClockHud::StartActionMode() {
	FrameClock = 0;
}
// - ------------------------------------------------------------------------------------------ - //
void cClockHud::StartEditMode() {
	FrameClock = 0;
}
// - ------------------------------------------------------------------------------------------ - //

// - ------------------------------------------------------------------------------------------ - //
void cClockHud::Step() {
	// Action Mode //
	if ( Engine->GameActive ) {
		// Show Clock Colon //
		Hud.GroupVisible( 2, 2, true );
		
	}
	// Edit Mode //
	else {
		// Flash Clock Colon //
		Hud.GroupVisible( 2, 2, ((FrameClock / (Global::FrameRate >> 1) ) & 1) == 0 );
		
		//Hud.Labels[ 3 ]->Visible = false;
		
//		for ( size_t idx = 0; idx < Hud.Labels.size(); idx++ ) {
//			Log( 10, idx << " ' " << Hud.Labels[ idx ]->Group );
//		}
	}
	
	// Step forward the frame clock //
	FrameClock++;
	
	Hud.Step();
}
// - ------------------------------------------------------------------------------------------ - //
void cClockHud::Draw() {
	Hud.Draw();
}
// - ------------------------------------------------------------------------------------------ - //
